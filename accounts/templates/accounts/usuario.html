{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-firestore.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <title>Administración | Gou II</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
    <link href="static/accounts/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Font Awesome Icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Morris chart -->
    <link href="accounts/js/plugins/morris/morris.css" rel="stylesheet" type="text/css" />
    <!-- Theme style -->
    <link href="static/accounts/AdminLTE.min.css" rel="stylesheet" type="text/css" />
    <link href="static/accounts/skins/_all-skins.min.css" rel="stylesheet" type="text/css" />

    <style>
    body {
        background-color: #f8f9fa;
    }
    .table {
        margin-top: 20px;
    }
    .table th {
        background-color: #28a745;
        color: white;
    }
    .table td {
        background-color: white;
    }
    .btn {
        margin-right: 5px;
    }
    .logo {
          color: #FFFFFF; 
          text-decoration: none; 
          font-family: 'Arial', sans-serif;
          font-size: 24px; 
          text-shadow: 2px 2px 4px #000000; 
        }
        .logo .admin {
          font-weight: normal;
          color: #FFFFFF; 
        }

  </style>
</head>
<body class="skin-green">
  <div class="wrapper">
    <header class="main-header">    
        <a href="{% url 'principal' %}" class="logo">
          <span class="admin">{{ usuario.rol }}</span>
        </a>
      <nav class="navbar navbar-static-top" role="navigation">
        <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
          <span class="sr-only"></span>
        </a>
        <!-- Menu -->
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            <li class="dropdown user user-menu">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <img src="data:image/png;base64,{{ image_data }}" class="user-image" alt="User Image">
                <span class="hidden-xs">{{ usuario.nombre }} {{ usuario.apellido }}</span>
              </a>
              <ul class="dropdown-menu">
                <!-- User image -->
                <li class="user-header">
                  <img src="data:image/png;base64,{{ image_data }}" class="user-image" alt="User Image">
                  <div style="text-align: center; padding: 20px;">
                    <h2 style="margin: 0; font-size: 24px; color: #f1e9e9; font-weight: 600;">{{ usuario.nombre }} {{ usuario.apellido }}</h2>
                    <p style="margin: 5px 0; font-size: 18px; color: #eaeef3; font-weight: 500;">{{ usuario.rol }}</p>
                      <small>Universidad de Cundinamarca</small>
                    </p>
                  </div>
                </li>
                <!-- Botones -->
                <li class="user-footer">
                  <div class="pull-left">
                    <a href="{% url 'config' %}" class="btn btn-default btn-flat">Configuración</a>
                  </div>
                  <div class="pull-right">
                    <a href="{% url 'login' %}" class="btn btn-default btn-flat">Cerrar sesión</a>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">
      <!-- sidebar: style can be found in sidebar.less -->
      <section class="sidebar">
        <!-- Sidebar user panel -->
        <div class="user-panel">
          <div class="pull-left image">
            <img src="data:image/jpg;base64,{{ image_data }}" class="img-circle" alt="User Image" />
          </div>
          <div class="pull-left info">
            <p>{{ usuario.nombre }} {{ usuario.apellido }}</p>
            <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
        </div>          
        </div>

     
        <!-- MENÚ PRINCIPAL-->
        <ul class="sidebar-menu">
          <li class="header">MENÚ PRINCIPAL</li>

          <!-- USUARIOS-->
          <li class="active treeview">
            <a href="{% url 'usuario' %}">
              <i class="fa fa-users"></i>
              <span>Usuarios</span>
              <span class="label label-primary pull-right"></span>
            </a>
          </li>

          <!-- REPORTES-->
          <li class="active treeview">
            <a href="#">
              <i class="fa fa-dashboard"></i> 
              <span>Reportes</span> 
              <i class="fa fa-angle-left pull-right"></i>
            </a>
            <ul class="treeview-menu">
              <li><a href="pages/charts/morris.html"><i class="fa fa-circle-o"></i> Morris</a></li>
              <li><a href="index.html"><i class="fa fa-circle-o"></i> Dashboard v1</a></li>
              <li class="active"><a href="{% url 'principal' %}"><i class="fa fa-circle-o"></i> Dashboard v2</a></li>
            </ul>
          </li>

          <!-- DOCUMENTACIÓN-->
          <li>
            <a href="{% url 'documento' %}">
              <i class="fa fa-envelope"></i> <span>Documentación</span>
            </a>
          </li>

          <!-- RESEÑAS-->
          <li>
            <a href="{% url 'resena' %}">
              <i class="fa fa-th"></i> <span>Reseñas</span>
            </a>
          </li>

          <!-- ADMINISTRADORES-->
          <li class="active treeview">
            <a href="{% url 'cuentas' %}">
              <i class="fa fa-user"></i>
              <span>Administrador</span>
              <span class="label label-primary pull-right"></span>
            </a>
            </li>
          </ul>
        </section>
      </aside>
      <div class="content-wrapper">    
        <!-- TABLA DE USUARIOS de la UDEC -->
        <section class="content">
          <div class="row">
              <div class="col-md-12">
                  <div class="box box-info">
                      <div class="box-header with-border">
                        <center><h3 class="box-title">Usuarios Registrados UdeC</h3></center>
                      </div><!-- /.box-header -->
                      <div class="box-body">
                          <div class="table-responsive">
                              <table id="user-table" class="table table-striped">
                                  <thead>
                                      <tr>
                                          <th>ID Usuario</th>
                                          <th>Nombre</th>
                                          <th>Apellidos</th>
                                          <th>Teléfono</th>
                                          <th>Email</th>
                                          <th>Acciones</th>
                                          <th> </th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                    {% for user in usuarios_not_blocked %}
                                        <tr>
                                          <td>{{ user.idusuario }}</td>
                                          <td>{{ user.nombre }}</td>
                                          <td>{{ user.apellidos }}</td>
                                          <td>{{ user.telefono }}</td>
                                          <td>{{ user.email }}</td>
                        
                                          <td>
                                            <form action="{% url 'eliminar_usuario' user.email %}" method="post" onsubmit="return confirm('¿Estás seguro de que deseas eliminar este usuario?');">
                                              {% csrf_token %}
                                              <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                                            </form>
                                          </td>
                                          <td>
                                            <form action="{% url 'bloquear_usuario' user.email %}" method="post" onsubmit="return confirm('¿Estás seguro de que deseas bloquear este usuario?');">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-warning btn-sm">Bloquear</button>
                                            </form>
                                        </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>                                                           
                              </table>
                          </div><!-- /.table-responsive -->
                      </div><!-- /.box-body -->
                  </div><!-- /.box -->
              </div><!-- /.col -->
          </div><!-- /.row -->
        </section><!-- /.content -->

        <!-- TABLA DE USUARIOS invitados -->
        <section class="content">
          <div class="row">
              <div class="col-md-12">
                  <div class="box box-info">
                      <div class="box-header with-border">
                        <center><h3 class="box-title">Usuarios Registrados invitados</h3></center>
                      </div><!-- /.box-header -->
                      <div class="box-body">
                          <div class="table-responsive">
                              <table id="user-table" class="table table-striped">
                                  <thead>
                                      <tr>
                                          <th>ID Usuario</th>
                                          <th>Nombre</th>
                                          <th>Apellidos</th>
                                          <th>Teléfono</th>
                                          <th>Email</th>
                                          <th>Acciones</th>
                                          <th> </th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                    {% for user in invitados_not_blocked %}
                                        <tr>
                                          <td>{{ user.idusuario }}</td>
                                          <td>{{ user.nombre }}</td>
                                          <td>{{ user.apellidos }}</td>
                                          <td>{{ user.telefono }}</td>
                                          <td>{{ user.email }}</td>
                        
                                          <td>
                                            <form action="{% url 'eliminar_usuario' user.email %}" method="post" onsubmit="return confirm('¿Estás seguro de que deseas eliminar este invitado?');">
                                              {% csrf_token %}
                                              <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                                            </form>
                                          </td>
                                          <td>
                                            <form action="{% url 'bloquear_usuario' user.email %}" method="post" onsubmit="return confirm('¿Estás seguro de que deseas bloquear este invitado?');">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-warning btn-sm">Bloquear</button>
                                            </form>
                                        </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>                                                             
                              </table>
                          </div><!-- /.table-responsive -->
                      </div><!-- /.box-body -->
                  </div><!-- /.box -->
              </div><!-- /.col -->
          </div><!-- /.row -->
        </section><!-- /.content -->

        <!-- /.TABLA DE USUARIOS bloqueados -->
        <section class="content">
          <div class="row">
              <div class="col-md-12">
                  <div class="box box-info">
                      <div class="box-header with-border">
                        <center><h3 class="box-title">Usuarios Bloqueados</h3></center>
                      </div><!-- /.box-header -->
                      <div class="box-body">
                          <div class="table-responsive">
                              <table id="user-table" class="table table-striped">
                                  <thead>
                                    <tr>
                                      <th>ID Usuario</th>
                                      <th>Nombre</th>
                                      <th>Apellidos</th>
                                      <th>Teléfono</th>
                                      <th>Email</th>
                                      <th>Acciones</th>
                                      <th> </th>
                                  </tr>
                              </thead>
                              <tbody>
                                {% for user in combined_blocked %}
                                    <tr>
                                      <td>{{ user.idusuario }}</td>
                                      <td>{{ user.nombre }}</td>
                                      <td>{{ user.apellidos }}</td>
                                      <td>{{ user.telefono }}</td>
                                      <td>{{ user.email }}</td>
                    
                                    <td>
                                        <form action="{% url 'desbloquear_usuario' user.email %}" method="post" onsubmit="return confirm('¿Estás seguro de que deseas desbloquear este usuario?');">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-warning btn-sm">Desbloquear</button>
                                        </form>
                                    </td>
                                  </tr>
                                {% endfor %}
                            </tbody>                                                           
                          </table>
                      </div><!-- /.table-responsive -->
                  </div><!-- /.box-body -->
              </div><!-- /.box -->
          </div><!-- /.col -->
      </div><!-- /.row -->
    </section><!-- /.content -->


      </div><!-- /.content-wrapper -->
    </div>

    <!-- jQuery 2.1.3 -->
    <script src="{% static 'accounts/js/plugins/jQuery/jQuery-2.1.3.min.js'%}"></script>
    <!-- Bootstrap 3.3.2 JS -->
    <script src="{% static 'accounts/js/bootstrap.min.js'%}" ></script>
    <!-- FastClick -->
    <script src="{% static 'accounts/js/plugins/fastclick/fastclick.min.js'%}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'accounts/js/app.min.js'%}"></script>
    <!-- Sparkline -->
    <script src="{% static 'accounts/js/plugins/sparkline/jquery.sparkline.min.js'%}" ></script>
    <!-- jvectormap -->
    <script src="{% static 'accounts/js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js'%}"></script>
    <script src="{% static 'accounts/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js'%}" ></script>
    <!-- daterangepicker -->
    <script src="{% static 'accounts/js/plugins/daterangepicker/daterangepicker.js'%}" ></script>
    <!-- datepicker -->
    <script src="{% static 'accounts/js/plugins/datepicker/bootstrap-datepicker.js'%}" ></script>
    <!-- iCheck -->
    <script src="{% static 'accounts/js/plugins/iCheck/icheck.min.js'%}"></script>
    <!-- SlimScroll 1.3.0 -->
    <script src="{% static 'accounts/js/plugins/slimScroll/jquery.slimscroll.min.js'%}" ></script>
    <!-- ChartJS 1.0.1 -->
    <script src="{% static 'accounts/js/plugins/chartjs/Chart.min.js'%}" ></script>

    

    <!-- AdminLTE for demo purposes -->
    <script src="{% static 'accounts/js/demo.js'%}" ></script>
  </body>
</html>